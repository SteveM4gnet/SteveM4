<html>
<head>
<link href="https://fonts.googleapis.com/css?family=Varela+Round:regular" rel="stylesheet" type="text/css">
</head>
<title>
Ready Reckoner
</title>
<body>
<div id = 'container'>
	<div class = 'header'>
		<p>Quick CO<sub>2</sub> Percentage Calculator 0.3.9</p>
	</div>
	<div class = 'app'>
		<pre id = 'question'></pre>

		<button
			class = 'button'
			id = 'boolTrue_1'
			onclick  = 'nextQ(true)'
			>Yes
		</button>

		<button
			class = 'button'
			id = 'boolFalse_1'
			onclick  = 'nextQ(false)'
			>No
		</button>

		<pre id = 'solution'></pre>

		<div id = 'quickCal'>
			<input
				type = 'number'
				class = 'hidden'
				id = 'CO2'
				onchange = 'calcPerc()'
				placeholder = 'CO2'>
			</input>
			<input
				type = 'number'
				class = 'hidden'
				id = 'ulev'
				onchange = 'calcUlev()'
				placeholder = 'Electric Range (Miles)'>
			</input>
			<input
				disabled
				type = 'number'
				class = 'hidden display-none'
				id = 'listPrice'
				onchange = 'listPrice()'
				placeholder = 'List price of car'>
			</input>
		
		</div>
		<pre id = 'percentage'></pre>		
	</div>
	<pre id = 'history' class = 'hidden'></pre>
	<button id = 'viewCalc' onclick = 'viewCalc()'>View Calculation</button>
	<div id = 'calc'>
		<pre id = 'calc-pre'>
	
CO2 = (String(CO2/5).split('.')[0])*5
mul = ((CO2-50)/5)/4;
a = (CO2/4 + (2.5 - mul));	

<valA></valA> rounded to <valB></valB>
((<valC></valC> - 50) / 5 ) / 4 = <valD></valD> 
(<valE></valE> / 4 + ( 2.5 - <valF></valF> )) = <valG></valG>

Attractions and deductions:
<valH></valH>
		
		</pre>
	</div>
</div>
<button id = 'reload' onclick = 'reload()'>Reload</button>
</body>
<style>
body, pre, button, input
{
	font-family: 'Varela Round';
	color: #888888;
}

.header
{
	font-weight: bold;
}

button
{
	background: #3B81BD;
	border:none;
	color:#fff;
}

.app button
{
	width:25vh;
	height:5vh;
	top:5vh;
	
}

.app
{
	position:absolute;
	top:10%;
	left:0;
	width:100%;
	text-align:center;
}

input
{
	outline-style: solid;
	outline-color: #e8f4ff;
	outline-width: 0.5vh;
	border: solid 1px #8c8c8c;
	padding:0.5vh;
	box-shadow: rgba(0,0,0,0.3) 0 0.1vh 0.2vh inset;
	width:25vh;
	height:5vh;
	top:100%;
	left:50%;
	transform:translate(-50%);
	position:absolute;
}

#history
{
	text-align:left;
	position:absolute;
	top:25%;
}

.hidden
{
	font-size:0vh;
	transition:0.2s;
	padding:0;
	border:0;
	outline:none;
	height:0vh !IMPORTANT;
}

#calc-pre
{
	font-size:0vh;
	transition:0.2s;
	position:absolute;
	background:#fff;
	top:-1vh;
	left:50%;
	transform:translate(-50%);
	outline: solid 0.0vh #888888;
	margin:0;
	padding:1vh;
	width:50%;
	height:auto;
	max-height:0vh;
}

#calc-pre.show
{
	font-size:1.5vh;
	transition:0.2s;
	outline: solid 0.1vh #888888;
	max-height:100vh;
	top:-0vh;
}

#viewCalc
{
	position:absolute;
	right:0;
	width:10%;
	top:0;
	height:5vh;
	font-size:1vh;
}

pre#percentage
{
    position: absolute;
    top: 30vh;
    font-weight: bold;
    color: #428bca;
    width: 100%;
    font-size: 5vh;
}

#reload
{
	position:absolute;
	bottom:0%;
	left:0;
	width:15%;
	height:5%;
}

.display-none
{
	display:none;
}
</style>
<script>
var qstn = document.getElementById('question'),
	sltn = document.getElementById('solution'),
	bton = document.querySelectorAll('.app .button'),
	hist = document.getElementById('history'),
	pBin = '',
	Apr6 = false,
	rde2 = false,
	desl = false,
	elec = false,
	qNum = 0,
	clcP;

var textQstn = 
	[
		'Is your car an all electric vehicle',
		'Is the vehicle a Diesel',
		'Is your diesel vehicle Euro 6D (RDE2) compliant',		
		'Is the car registered after 06/04/2020',
		'Is the CO<sub>2</sub> Emissions of your car 50g/km or below',
		
	];
	
window.onload = function()
{
	var bool = '';
	start(bool);
}

function start(bool)
{
	pBin += bool ? 1 : 0;
	/*
	Matrix:
	show CO2, show Elec Range, newer than 06/04/2020, diesel, rde2 diesel, electric
	        --------------------------------------------
	INPUT 	||  0  ||  0  ||  0  ||  0  ||  0  ||  1  ||
			|| NUL || ELC || DSL || RDE || REG || 50G ||
			|| --- || --- || --- || --- || --- || --- ||
	BINARY 	||  0  ||  1  ||  0  ||  0  ||  0  ||  0  ||
			|| CO2 || RNG || NEW || DSL || RDE || ELC ||
			--------------------------------------------
	*/
	
	pBin == '01'		? showSltn(0, 0, 0, 0, 0, 1) :	
	pBin == '000'		? (qNum++, pBin += 0):
	pBin == '000000'	? showSltn(1, 0, 0, 0, 0, 0) :
	pBin == '000001'	? showSltn(0, 1, 0, 0, 0, 0) :
	pBin == '000010'	? showSltn(1, 0, 1, 0, 0, 0) :
	pBin == '000011'	? showSltn(0, 1, 1, 0, 0, 0) :
	pBin == '001000'	? showSltn(1, 0, 0, 1, 0, 0) :
	pBin == '001010'	? showSltn(1, 0, 1, 1, 0, 0) :
	pBin == '001001'	? showSltn(0, 1, 0, 1, 0, 0) :
	pBin == '001011'	? showSltn(0, 1, 1, 1, 0, 0) :
	pBin ==	'001111'	? showSltn(1, 0, 1, 1, 1, 0) :
	pBin ==	'001100'	? showSltn(1, 0, 0, 1, 1, 0) :
	pBin ==	'001101'	? showSltn(0, 1, 0, 1, 1, 0) :
	pBin == '001110'	? showSltn(1, 0, 1, 1, 1, 0) :	null;	
	console.log(pBin);
	
	qstn.innerHTML = textQstn[qNum] + '?';
	if (textQstn[qNum])
	{
		if (!elec)
		{
		hist.innerHTML += 'Q: ' + textQstn[qNum] + '?' + '\n' + 'A: ';
		}
	}
	
	qNum > 4 ? qNum = 0 : null;
}

function showSltn(b,c,d,e,f,g)
{
	var CO2 = document.getElementById('CO2'),
		ulev = document.getElementById('ulev'),
		a;
		
	b == 1 ? CO2.classList.toggle('hidden') : null;
	c == 1 ? ulev.classList.toggle('hidden') : null;
	d == 1 ? Apr6 = true: null;
	e == 1 ? desl = true: null;
	f == 1 ? rde2 = true: null;
	g == 1 ? elec = true: null;
	
	sltn.innerHTML = buildSltn(b,c,d,e,f);
	function buildSltn(b,c,d,e,f)
	{
		var txt = 'You have a'
		
		if (g)
		{
			txt += 'n all electric vehicle';
			return txt;
		};
		
		txt += e ? ' diesel (D)' : ' hybrid, petrol or other (A/F) rated';
		txt += ' car, registered '
		txt += !d ? 'before' : 'after';
		txt += ' 06/04/2020.'; 
		txt += '\n';
		txt += 'The vehicle has ';
		txt += c ? 	'a CO<sub>2</sub> value under 50g/km ' : 
					'a CO<sub>2</sub> emession of over 50g/km.';
		txt += '\n';
		txt += e ? ' Your diesel is ' : '';
		txt += e ? f ? 'Euro 6D (RDE2) complient.' : 'not Euro 6D (RDE2) complient.' : '';
		txt += '\n';
		txt += c ? 'Enter your Electric Range' : 'Enter your CO<sub>2</sub>';
		return txt;
	};
	
	qstn.classList.toggle('hidden');
	for (a = 0; a < bton.length; a++)
	{
		bton[a].classList.toggle('hidden');
	}
}

function nextQ(bool)
{
	hist.innerHTML += bool ? 'yes' + '\n' : 'no' + '\n';
	qNum++;
	start(bool);
	return;
}

function calcPerc()
{
	var CO2 = document.getElementById('CO2'),
		pcnt = document.getElementById('percentage'),
		a,
		mul;
	
	showListPrice(CO2);	
	var calc = document.querySelector('#calc-pre'),
		valA = document.querySelector('valA'),
		valB = document.querySelector('valB'),
		valC = document.querySelector('valC'),
		valD = document.querySelector('valD'),
		valE = document.querySelector('valE'),
		valF = document.querySelector('valF'),
		valG = document.querySelector('valG'),
		valH = document.querySelector('valH');
	
	//----------------
		valA.innerHTML = CO2.value;
	//----------------	
	CO2 = (String(CO2.value/5).split('.')[0])*5
	//-----------------
		valB.innerHTML = CO2;
	//-----------------
	mul = ((CO2-50)/5)/4;
	//-----------------	
		valC.innerHTML = CO2;
		valD.innerHTML = mul;
	//-----------------	
	a = (CO2/4 + (2.5 - mul));	
	//-----------------	
		valE.innerHTML = CO2;
		valF.innerHTML = mul;
		valG.innerHTML = a;
	//-----------------
	Apr6 ? (a = (a - 2), valH.innerHTML = 'New car, -2%') : valH.innerHTML = 'None';	
	desl ? (a = (a + 4), valH.innerHTML = 'Diesel, +4%') : valH.innerHTML = 'None';	
	rde2 ? (a = (a - 4), valH.innerHTML = 'RDE2 diesel, no attraction') : valH.innerHTML = 'None';	
	
	pcnt.innerHTML = a + '%';
	clcP = a;
}

function calcUlev()
{
	var ulev = document.getElementById('ulev'),
		pcnt = document.getElementById('percentage');
	
	showListPrice(ulev);	
	ulev.value < 30 ? a = 14 :
	ulev.value < 39 ? a = 12 :
	ulev.value < 69 ? a = 8 :
	ulev.value < 129 ? a  = 5 :
	ulev.value > 130 ? a = 2 : a = 0 ;
	
	Apr6 ? a = (a - 2) : null;
	desl ? a = (a + 4) : null;
	rde2 ? a = (a - 4) : null;
	
	pcnt.innerHTML = a + '%';
	clcP = a;	
}

function viewCalc()
{
	var show = document.getElementById('calc-pre');
	show.classList.toggle('show');
}

function showListPrice(hide)
{
	<!-- var prce = document.getElementById('listPrice'); -->
	<!-- hide.classList.toggle('hidden'); -->
	<!-- prce.classList.toggle('hidden'); -->
}

function listPrice(a)
{
	var list = document.getElementById('listPrice').value,
		pcnt = document.getElementById('percentage'),
		emote;
	
	a = list/100 * clcP;
	
	pcnt.innerHTML = 'Â£' + a + ' tax value ';
}

function reload()
{
	location.reload();
}
</script>
</html>